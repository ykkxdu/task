webpackJsonp([6],{"4xbP":function(e,t,o){"use strict";var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{attrs:{placeholder:"蓝牙标签"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.query(t)}},model:{value:e.searchForm.blueLabelNo,callback:function(t){e.$set(e.searchForm,"blueLabelNo",t)},expression:"searchForm.blueLabelNo"}})],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{loading:e.loading,icon:"el-icon-search"},on:{click:e.query}},[e._v("搜索")]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.openCreateForm}},[e._v("添加")])],1)],1),e._v(" "),o("el-table",{attrs:{data:e.blueLabels,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"380",type:"index"}}),e._v(" "),o("el-table-column",{attrs:{label:"蓝牙名称","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.blueToothName)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"蓝牙ID","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.blueToothId)+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"380",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){e.openUpdateForm(t.row)}}},[o("i",{staticClass:"el-icon-edit"})]),e._v(" "),o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){e.confirmDelete(t.row)}}},[o("i",{staticClass:"el-icon-delete"})])]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"blueLabelForm",staticClass:"small-space",staticStyle:{"margin-left":"30px","margin-right":"50px"},attrs:{model:e.formData,"label-position":"right","label-width":"140px"}},[o("el-form-item",{attrs:{label:"蓝牙标签",prop:"blueToothName",rules:[{required:!0,message:"蓝牙标签不能为空"}]}},[o("el-input",{model:{value:e.formData.blueToothName,callback:function(t){e.$set(e.formData,"blueToothName",t)},expression:"formData.blueToothName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"蓝牙ID",prop:"blueToothId",rules:[{required:!0,message:"蓝牙ID不能为空"}]}},[o("el-input",{model:{value:e.formData.blueToothId,callback:function(t){e.$set(e.formData,"blueToothId",t)},expression:"formData.blueToothId"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?o("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.create}},[e._v("确定")]):o("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.update}},[e._v("确定")])],1)],1)],1)},a=[],i={render:l,staticRenderFns:a};t.a=i},BWMs:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("VTdn"),a=o("4xbP"),i=o("VU/8"),n=i(l.a,a.a,null,null,null);t.default=n.exports},VTdn:function(e,t,o){"use strict";var l=o("Dd8w"),a=o.n(l),i=o("NYxO"),n=o("0xDb");t.a={data:function(){return{loading:!1,dialogFormVisible:!1,dialogStatus:"",searchForm:{page:0,size:12,sort:"id,asc"},textMap:{update:"编辑",create:"创建"},formData:{id:0,blueToothName:"",blueToothId:""}}},computed:a()({},o.i(i.b)(["blueLabels","menus"])),mounted:function(){this.query()},methods:a()({},o.i(i.c)(["createBlueLabel","updateBlueLabel","deleteBlueLabel","queryAllInspectionTasks","queryAllBlueLabels"]),{query:function(){var e=this;this.loading=!0,this.queryAllBlueLabels(this.searchForm).then(function(){return e.queryAllInspectionTasks({projection:"blueLabel"})}).then(function(){e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},openCreateForm:function(){this.formData={id:0,blueToothName:""},this.dialogStatus="create",this.dialogFormVisible=!0},openUpdateForm:function(e){this.formData=o.i(n.e)(e),this.dialogStatus="update",this.dialogFormVisible=!0},create:function(){var e=this;this.loading=!0,this.$refs.blueLabelForm.validate(function(t){t?e.createBlueLabel(e.formData).then(function(){o.i(n.d)(),e.loading=!1,e.dialogFormVisible=!1,e.query()}).catch(function(t){o.i(n.d)("",{type:"error"}),e.loading=!1,e.dialogFormVisible=!1}):(o.i(n.d)("检查所填字段",{type:"warning"}),e.loading=!1)})},confirmDelete:function(e){for(var t=this,l=this.menus,a=0;a<l.length;a++){var i=l[a];if(i.blueToothName===e.blueToothName&&i.children.length>0)return void this.$alert("该蓝牙标签中包含产品信息，请先删除该蓝牙标签下的产品信息。","提示",{confirmButtonText:"确定"})}this.$confirm("此操作将永久删除此数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){t.deleteBlueLabel(e).then(function(){o.i(n.d)(),t.query()}).catch(function(e){o.i(n.d)("删除失败!",{type:"error"})})}).catch(function(){o.i(n.d)("已取消删除操作!",{type:"info"})})},update:function(){var e=this;this.loading=!0,this.updateBlueLabel(this.formData).then(function(){o.i(n.d)(),e.loading=!1,e.dialogFormVisible=!1,e.query()}).catch(function(t){o.i(n.d)("",{type:"error"}),e.loading=!1,e.dialogFormVisible=!1})}})}}});