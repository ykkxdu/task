webpackJsonp([6],{"4xbP":function(t,e,o){"use strict";var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{attrs:{placeholder:"蓝牙名称"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.query(e)}},model:{value:t.searchForm.blueToothName,callback:function(e){t.$set(t.searchForm,"blueToothName",e)},expression:"searchForm.blueToothName"}})],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{loading:t.loading,icon:"el-icon-search"},on:{click:t.query}},[t._v("搜索")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.openCreateForm}},[t._v("添加")])],1)],1),t._v(" "),o("el-table",{attrs:{data:t.blueLabels,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"380",type:"index"}}),t._v(" "),o("el-table-column",{attrs:{label:"蓝牙名称","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.blueToothName)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"蓝牙ID","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.blueToothId)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"380",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){t.openUpdateForm(e.row)}}},[o("i",{staticClass:"el-icon-edit"})]),t._v(" "),o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){t.confirmDelete(e.row)}}},[o("i",{staticClass:"el-icon-delete"})])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"blueLabelForm",staticClass:"small-space",staticStyle:{"margin-left":"30px","margin-right":"50px"},attrs:{model:t.formData,"label-position":"right","label-width":"140px"}},[o("el-form-item",{attrs:{label:"蓝牙名称",prop:"blueToothName",rules:[{required:!0,message:"蓝牙名称不能为空"}]}},[o("el-input",{model:{value:t.formData.blueToothName,callback:function(e){t.$set(t.formData,"blueToothName",e)},expression:"formData.blueToothName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"蓝牙ID",prop:"blueToothId",rules:[{required:!0,message:"蓝牙ID不能为空"}]}},[o("el-input",{model:{value:t.formData.blueToothId,callback:function(e){t.$set(t.formData,"blueToothId",e)},expression:"formData.blueToothId"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?o("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.create}},[t._v("确定")]):o("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.update}},[t._v("确定")])],1)],1)],1)},a=[],i={render:l,staticRenderFns:a};e.a=i},BWMs:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o("VTdn"),a=o("4xbP"),i=o("VU/8"),n=i(l.a,a.a,null,null,null);e.default=n.exports},VTdn:function(t,e,o){"use strict";var l=o("Dd8w"),a=o.n(l),i=o("NYxO"),n=o("0xDb");e.a={data:function(){return{loading:!1,dialogFormVisible:!1,dialogStatus:"",searchForm:{page:0,size:12,blueToothName:"",sort:"id,asc"},textMap:{update:"编辑",create:"创建"},formData:{id:0,blueToothName:"",blueToothId:""}}},computed:a()({},o.i(i.b)(["blueLabels","menus"])),mounted:function(){this.query()},methods:a()({},o.i(i.c)(["createBlueLabel","updateBlueLabel","deleteBlueLabel","queryAllInspectionTasks","queryAllBlueLabels"]),{query:function(){var t=this;this.loading=!0,this.queryAllBlueLabels(this.searchForm).then(function(){return t.queryAllInspectionTasks({projection:"all"})}).then(function(){t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},openCreateForm:function(){this.formData={id:0,blueToothName:""},this.dialogStatus="create",this.dialogFormVisible=!0},openUpdateForm:function(t){this.formData=o.i(n.e)(t),this.dialogStatus="update",this.dialogFormVisible=!0},create:function(){var t=this;this.loading=!0,this.$refs.blueLabelForm.validate(function(e){e?t.createBlueLabel(t.formData).then(function(){o.i(n.d)(),t.loading=!1,t.dialogFormVisible=!1,t.query()}).catch(function(e){o.i(n.d)("",{type:"error"}),t.loading=!1,t.dialogFormVisible=!1}):(o.i(n.d)("检查所填字段",{type:"warning"}),t.loading=!1)})},confirmDelete:function(t){for(var e=this,l=this.menus,a=0;a<l.length;a++){var i=l[a];if(i.blueToothName===t.blueToothName&&i.children.length>0)return void this.$alert("该蓝牙名称中包含产品信息，请先删除该蓝牙名称下的产品信息。","提示",{confirmButtonText:"确定"})}this.$confirm("此操作将永久删除此数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){e.deleteBlueLabel(t).then(function(){o.i(n.d)(),e.query()}).catch(function(t){o.i(n.d)("删除失败!",{type:"error"})})}).catch(function(){o.i(n.d)("已取消删除操作!",{type:"info"})})},update:function(){var t=this;this.loading=!0,this.updateBlueLabel(this.formData).then(function(){o.i(n.d)(),t.loading=!1,t.dialogFormVisible=!1,t.query()}).catch(function(e){o.i(n.d)("",{type:"error"}),t.loading=!1,t.dialogFormVisible=!1})}})}}});