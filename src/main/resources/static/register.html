<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" />
<title>注册</title>
<script type="text/javascript" src="js/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/index.css" />
</head>

<body>

<img class="bgone" src="images/1.jpg" />
<img class="pic" src="images/a.png" />

<div class="table">
	<div class="wel">火花数据共享平台</div>
	<div class="user" style="top: 2rem;">
		<div id="yonghu"><img src="images/yhm.png" /></div>
		<input id="username" type="text" name="" placeholder="用户名" />
	</div>
	<div class="user" style="top: 6rem;">
		<div id="yonghu"><img src="images/phone.png" /></div>
		<input id="phone" type="text" name="" placeholder="手机号" />
		<button style="background-color:#1296db;color:white;border-radius:12px;height:40px;width:100px;position: absolute;left:272px;top:7px;font-size: 14px;border: solid 1px #666666;">获取验证码</button>
	</div>
	<div class="user" style="top: 10rem;">
		<div id="yonghu"><img src="images/code.png" /></div>
		<input id="verification" type="text" name="" placeholder="验证码" />
	</div>
	<div class="password" style="top: 14rem;">
		<div id="yonghu"><img src="images/mm.png" /></div>
		<input id="password" type="password" name="密码" placeholder="密码(字数、数字混合，不少于6位)"/>
	</div>
	<div class="password" style="top: 18rem;">
		<div id="yonghu"><img src="images/mm.png" /></div>
		<input id="psdrepeat" type="password" name="密码" placeholder="重复密码"/>
	</div>
	<button style="top: 24rem;" class="btn" name="注册" value="注册"  onclick="register()">注册</button>
</div>

</body>
<script>
    function register() {
        var username = $('#username').val() ;
        var password = $('#password').val() ;
		var phone = $('#phone').val() ;
		var psdrepeat = $('#psdrepeat').val() ;
        if(username==''){
			alert('用户名不能为空！')
		}else if(password==''){
			alert('密码不能为空！')
		}else if(phone==''){
			alert('手机号不能为空！')
		}else if(psdrepeat==''){
			alert('重复密码不能为空！')
		}
		if(password!=psdrepeat){
			alert('重复密码与密码不一致！')
		}
		var list = {
			userName:username,
			phone:phone,
			password:password,
			role:"USER"
		}
		$.ajax({
            //请求方式
            type : "POST",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //请求地址
            url : "http://localhost:6001/api/users/registry",
            //数据，json字符串
            data : JSON.stringify(list),
            //请求成功
            success : function(result) {
                console.log(result);
				alert('注册成功！')
				window.location.href = 'login.html';
            },
            //请求失败，包含具体的错误信息
            error : function(e){
                console.log(e.status);
                console.log(e.responseText);
            }
        });
        // if (username === 'admin' && password ==='123456') {
        //     window.location.href = 'index.html';
        // } else {
        //     alert('用户名或密码错误');
        // }
    }
</script>
</html>